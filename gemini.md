# Правила проекта

## 1. НИКОГДА не восстанавливать предыдущие версии без подтверждения
ВСЕГДА спрашивать перед восстановлением любого бэкапа или предыдущей версии.

## 2. Безопасность — НИКОГДА не коммитить учетные данные
- `config.json` содержит API-ключи — НИКОГДА не коммитить.
- Файлы `.env` — НИКОГДА не коммитить.
- ВСЕГДА проверять `git status` перед коммитами.

## 3. Git workflow
- Основная ветка: `main`.
- ВСЕГДА писать информативные сообщения к коммитам.

## 4. Перед удалением
ВСЕГДА спрашивать перед удалением любого файла.

## 5. Структура проекта
- `src/` — основной код.
- `docs/` — документация.
- Подробности см. в `docs/architecture.md`.

## 6. Язык
- ВСЕ общение должно вестись на **русском языке**.
- ВСЕ файлы документации и текстовые файлы должны быть на **русском языке**.

## 7. Оформление описаний
- При описании сделанных изменений (для коммитов/пушей) использовать **эмодзи** в подзаголовках.

## 8. Протокол подтверждения команд
- ПЕРЕД запуском любой команды, требующей подтверждения (кнопка Approve), Агент ОБЯЗАН:
    1. Явно написать в чате, какая команда будет запущена и зачем.
    2. Если пользователь не видит кнопку "Approve", Агент должен запустить вспомогательный скрипт уведомления: `./scripts/approve.sh`.
    3. Ждать явного подтверждения (нажатия кнопки или сигнала через скрипт).

## 9. Управление контекстом (SNAPSHOTS)
При достижении **40 сообщений** в чате Агент обязан создать файл выжимки в папке `AI_CONTEXT/` по следующей структуре:

1. **Роль и Тональность (Persona)**: Четкое определение роли Агента и стиля общения (напр. "Экспертный разработчик на n8n").
2. **Глоссарий и Специфика (Key Facts)**: Уникальные термины проекта, стек технологий (Indus.8M, Supabase, Qualifizer).
3. **Текущий статус (Progress Report)**: Что сделано в текущем чате и на чем остановились.
4. **Действующие ограничения (Constraints)**: Критические правила из `gemini.md` и специфические запреты.
5. **Ближайшая задача (Next Step)**: Четкий призыв к действию для старта нового диалога.

После создания файла Агент предупреждает пользователя о необходимости смены чата для сохранения производительности.
