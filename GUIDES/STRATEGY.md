# Концепция и план реализации системы "Джарвис" (Indus.8M)

Цель — создать единый "организм", где воркфлоу не просто работают параллельно, а обмениваются данными и логически продолжают друг друга.

## Архитектура "Джарвиса"

Система строится вокруг **Центрального Хаба данных** (Supabase) и **Оркестратора** (Qualifizer), который управляет переходами между этапами.

### Основные компоненты

1.  **Мозг (Оркестратор)**: Обновленный воркфлоу `Qualifizer`. Он принимает запрос, определяет стадию (Ресерч, Анализ, Идея) и вызывает соответствующие под-воркфлоу.
2.  **Генератор Знаний (Dynamic Research)**: Модифицированная `Research Team`. Добавим цикл "Исследование -> Оценка -> Уточнение запроса", чтобы агент мог самостоятельно углубляться в тему.
3.  **Память (Data Hub)**: Единая структура в Supabase (таблицы: `projects`, `raw_data`, `hypotheses`, `prototypes`).
4.  **Интерфейс (RAG Assistant)**: `INFO KONSULTANT` становится "голосом" системы, через который пользователь обсуждает результаты в реальном времени.
5.  **Руки (Execution Agents)**: "Армия SMM" и "Бизнес Ассистент" получают задания напрямую из Хаба после утверждения идей пользователем.

---

## План разработки

### Этап 1: Создание Центрального Хаба
- Проектирование схемы таблиц в Supabase для хранения контекста проекта.
- Настройка `Qualifizer` на чтение/запись "состояния" (State Management).

### Этап 2: Динамический Ресерч
- Модернизация **Research Team**:
    - Добавление ноды "Query Generator", которая на основе предыдущих результатов Perplexity формирует новые поисковые запросы.
    - Автоматическая запись лонгридов в Supabase с привязкой к ID проекта.

### Этап 3: Интеграция "Консультанта"
- Модернизация **INFO KONSULTANT**:
    - Подключение к новым таблицам Хаба.
    - Реализация режима "Обсуждение гипотез", где ИИ предлагает варианты на основе данных ресерча.

### Этап 4: Замыкание цикла (SMM и Бизнес)
- Связка SMM-агентов с таблицей `prototypes`.
- Настройка Бизнес-ассистента на создание планов реализации на основе утвержденных гипотез.

---

## Верификация проекта

### Автоматические тесты
- Тестирование `Qualifizer` через Telegram: отправка сложного запроса (например, "Исследуй рынок кофеен в Москве и предложи 3 идеи для SMM").
- Проверка записи всех этапов в Supabase.

### Ручная проверка
- Запуск полного цикла от запроса до генерации первого поста в SMM-агенте.
- Проверка качества уточняющих вопросов от "Динамического Ресерчера".

> [!IMPORTANT]
> Для реализации потребуется доступ к существующим API ключам (Perplexity, OpenAI, Supabase), которые уже настроены в ваших воркфлоу.
